<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){ dataLayer.push(arguments); }

  gtag('js', new Date());
  gtag('config', 'G-Z7YHHWQRXB', {
    anonymize_ip: true,
    send_page_view: false
  });

  window.addEventListener('DOMContentLoaded', () => {
    const fieldsToRedact = [
      'fullName', 'dob', 'address', 'phone', 'email',
      'medicare', 'tax', 'passport', 'driver',
      'bank', 'health', 'emergency'
    ];

    const originalData = {};
    const redactedData = {};

    fieldsToRedact.forEach(fieldId => {
      const field = document.getElementById(fieldId);
      if (field) {
        originalData[fieldId] = field.value;
        redactedData[fieldId] = '[REDACTED]';
      }
    });

    // Log original vs redacted
    console.log('üì¶ Would have sent to Google Analytics (BEFORE redaction):');
    console.table(originalData);

    console.log('üõ°Ô∏è Sending to Google Analytics (AFTER redaction):');
    console.table(redactedData);

    // Send the redacted data to GA
    gtag('event', 'dummy_form_loaded', redactedData);
  });
</script>
